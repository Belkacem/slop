<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: README
  
    &mdash; Slop - Option gathering made easy
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html" title="Index">Index</a> &raquo; 
    <span class="title">File: README</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h1>Slop</h1>

<p>Slop is a simple option parser with an easy to remember syntax and friendly API.</p>

<h2>Installation</h2>

<h3>Rubygems</h3>

<pre class="code"><span class='id gem'>gem</span> <span class='id install'>install</span> <span class='id slop'>slop</span>
</pre>

<h3>GitHub</h3>

<pre class="code">git clone git://github.com/injekt/slop.git
gem build slop.gemspec
gem install slop-&lt;version&gt;.gem
</pre>

<h2>Usage</h2>

<pre class="code"><span class='comment'># parse assumes ARGV, otherwise you can pass it your own Array
</span><span class='id opts'>opts</span> <span class='op'>=</span> <span class='const'>Slop</span><span class='period'>.</span><span class='id parse'>parse</span> <span class='kw'>do</span>
  <span class='id on'>on</span> <span class='symbol'>:v</span><span class='comma'>,</span> <span class='symbol'>:verbose</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Enable verbose mode</span><span class='tstring_end'>'</span></span>           <span class='comment'># boolean value
</span>  <span class='id on'>on</span> <span class='symbol'>:n</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>true</span>                  <span class='comment'># option requires a compulsory argument
</span>  <span class='id on'>on</span> <span class='symbol'>:s</span><span class='comma'>,</span> <span class='symbol'>:sex</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your sex</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:optional</span> <span class='op'>=&gt;</span> <span class='kw'>false</span>      <span class='comment'># the same thing
</span>  <span class='id on'>on</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-a</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--age</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your age</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:optional</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>  <span class='comment'># optional argument
</span><span class='kw'>end</span>

<span class='comment'># if ARGV is `-v --name 'lee jarvis' -s male`
</span><span class='id opts'>opts</span><span class='period'>.</span><span class='id verbose?'>verbose?</span> <span class='comment'>#=&gt; true
</span><span class='id opts'>opts</span><span class='period'>.</span><span class='id name?'>name?</span>    <span class='comment'>#=&gt; true
</span><span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>   <span class='comment'>#=&gt; 'lee jarvis'
</span><span class='id opts'>opts</span><span class='period'>.</span><span class='id age?'>age?</span>     <span class='comment'>#=&gt; false
</span><span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:age</span><span class='rbracket'>]</span>    <span class='comment'>#=&gt; nil
</span></pre>

<p>For more information about creating options, see the
<a href="https://github.com/injekt/slop/wiki/Creating-Options">Creating Options</a>
wiki page.</p>

<p>You can also return your options as a Hash</p>

<pre class="code"><span class='id opts'>opts</span><span class='period'>.</span><span class='id to_hash'>to_hash</span> <span class='comment'>#=&gt; {'name' =&gt; 'Lee Jarvis', 'verbose' =&gt; true, 'age' =&gt; nil, 'sex' =&gt; 'male'}
</span></pre>

<p>If you want some pretty output for the user to see your options, you can just
send the Slop object to <code>puts</code> or use the <code>help</code> method.</p>

<pre class="code"><span class='id puts'>puts</span> <span class='id opts'>opts</span>
<span class='id puts'>puts</span> <span class='id opts'>opts</span><span class='period'>.</span><span class='id help'>help</span>
</pre>

<p>Will output something like</p>

<pre class="code">-v, --verbose      Enable verbose mode
-n, --name         Your name
-a, --age          Your age
</pre>

<p>You can also add a banner using the <code>banner</code> method</p>

<pre class="code"><span class='id opts'>opts</span> <span class='op'>=</span> <span class='const'>Slop</span><span class='period'>.</span><span class='id parse'>parse</span> <span class='kw'>do</span>
  <span class='id banner'>banner</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Usage: foo.rb [options]</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
</pre>

<h2>Helpful Help</h2>

<p>Long form:</p>

<pre class="code">Slop.parse do
  ...
  on :h, :help, 'Print this help message', :tail =&gt; true do
    puts help
    exit
  end
end
</pre>

<p>Shortcut:</p>

<pre class="code">Slop.parse :help =&gt; true do
  ...
end
</pre>

<h2>Parsing</h2>

<p>Slop's pretty good at parsing, let's take a look at what it'll extract for you</p>

<pre class="code"><span class='const'>Slop</span><span class='period'>.</span><span class='id parse'>parse</span> <span class='kw'>do</span>
  <span class='id on'>on</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>s</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>server</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>true</span>
  <span class='id on'>on</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>p</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>port</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:as</span> <span class='op'>=&gt;</span> <span class='symbol'>:integer</span>
  <span class='id on'>on</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>username</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:matches</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[^a-zA-Z]+$</span><span class='regexp_end'>/</span></span>
  <span class='id on'>on</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>password</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>

<p>Now throw some options at it:</p>

<pre class="code">-s ftp://foobar.com -p1234 --username=FooBar --password 'hello there'
</pre>

<p>Here's what we'll get back</p>

<pre class="code"><span class='lbrace'>{</span>
    <span class='symbol'>:server</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ftp://foobar.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:port</span><span class='op'>=&gt;</span><span class='int'>1234</span><span class='comma'>,</span>
    <span class='symbol'>:username</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FooBar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:password</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello there</span><span class='tstring_end'>&quot;</span></span>
<span class='rbrace'>}</span>
</pre>

<h2>Events</h2>

<p>If you'd like to trigger an event when an option is used, you can pass a
block to your option. Here's how:</p>

<pre class="code"><span class='const'>Slop</span><span class='period'>.</span><span class='id parse'>parse</span> <span class='kw'>do</span>
  <span class='id on'>on</span> <span class='symbol'>:V</span><span class='comma'>,</span> <span class='symbol'>:version</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Print the version</span><span class='tstring_end'>'</span></span> <span class='kw'>do</span>
    <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Version 1.0.0</span><span class='tstring_end'>'</span></span>
    <span class='id exit'>exit</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>

<p>Now when using the <code>--version</code> option on the command line, the trigger will
be called and its contents executed.</p>

<h2>Yielding Non Options</h2>

<p>If you pass a block to <code>Slop#parse</code>, Slop will yield non-options as
they're found, just like
<a href="http://rubydoc.info/stdlib/optparse/1.9.2/OptionParser:order">OptionParser</a>
does it.</p>

<pre class="code"><span class='id opts'>opts</span> <span class='op'>=</span> <span class='const'>Slop</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>do</span>
  <span class='id on'>on</span> <span class='symbol'>:n</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:optional</span> <span class='op'>=&gt;</span> <span class='kw'>false</span>
<span class='kw'>end</span>

<span class='id opts'>opts</span><span class='period'>.</span><span class='id parse'>parse</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id arg'>arg</span><span class='op'>|</span>
  <span class='id puts'>puts</span> <span class='id arg'>arg</span>
<span class='kw'>end</span>

<span class='comment'># if ARGV is `foo --name Lee bar`
</span><span class='id foo'>foo</span>
<span class='id bar'>bar</span>
</pre>

<h2>Negative Options</h2>

<p>Slop also allows you to prefix <code>--no-</code> to an option which will force the option
to return a false value.</p>

<pre class="code"><span class='id opts'>opts</span> <span class='op'>=</span> <span class='const'>Slop</span><span class='period'>.</span><span class='id parse'>parse</span> <span class='kw'>do</span>
  <span class='id on'>on</span> <span class='symbol'>:v</span><span class='comma'>,</span> <span class='symbol'>:verbose</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
<span class='kw'>end</span>

<span class='comment'># with no command line options
</span><span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; true
</span>
<span class='comment'># with `--no-verbose`
</span><span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; false
</span><span class='id opts'>opts</span><span class='period'>.</span><span class='id verbose?'>verbose?</span>  <span class='comment'>#=&gt; false
</span></pre>

<h2>Short Switches</h2>

<p>Want to enable multiple switches at once like rsync does? By default Slop will
parse <code>-abcd</code> as the option <code>a</code> with the argument <code>bcd</code>, this can be disabled
by passing the <code>:multiple_switches</code> option to a new Slop object.</p>

<pre class="code"><span class='id opts'>opts</span> <span class='op'>=</span> <span class='const'>Slop</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:strict</span><span class='comma'>,</span> <span class='symbol'>:multiple_switches</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id on'>on</span> <span class='symbol'>:a</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>First switch</span><span class='tstring_end'>'</span></span>
  <span class='id on'>on</span> <span class='symbol'>:b</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Second switch</span><span class='tstring_end'>'</span></span>
  <span class='id on'>on</span> <span class='symbol'>:c</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Third switch</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span>

<span class='id opts'>opts</span><span class='period'>.</span><span class='id parse'>parse</span>

<span class='comment'># Using `-ac`
</span><span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:a</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; true
</span><span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:b</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; false
</span><span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:c</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; true
</span></pre>

<h2>Lists</h2>

<p>You can of course also parse lists into options. Here's how:</p>

<pre class="code"><span class='id opts'>opts</span> <span class='op'>=</span> <span class='const'>Slop</span><span class='period'>.</span><span class='id parse'>parse</span> <span class='kw'>do</span>
  <span class='id opt'>opt</span> <span class='symbol'>:people</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:as</span> <span class='op'>=&gt;</span> <span class='const'>Array</span>
<span class='kw'>end</span>

<span class='comment'># ARGV is `--people lee,john,bill`
</span><span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:people</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; ['lee', 'john', 'bill']
</span></pre>

<p>Slop supports a few styles of list parsing. Check out
<a href="https://github.com/injekt/slop/wiki/Lists">this wiki page</a> for more info.</p>

<h2>Strict Mode</h2>

<p>Passing <code>strict =&gt; true</code> to <code>Slop.parse</code> causes it to raise a <code>Slop::InvalidOptionError</code>
when an invalid option is found (<code>false</code> by default):</p>

<pre class="code"><span class='const'>Slop</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:strict</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='qwords_beg'>%w/</span><span class='tstring_content'>--foo</span><span class='words_sep'>/</span><span class='rparen'>)</span>
<span class='comment'># =&gt; Slop::InvalidOptionError: Unknown option -- 'foo'
</span></pre>

<h2>Features</h2>

<p>Check out the following wiki pages for more features:</p>

<ul>
<li><a href="https://github.com/injekt/slop/wiki/Ranges">Ranges</a></li>
<li><a href="https://github.com/injekt/slop/wiki/Auto-Create">Auto Create</a></li>
<li><a href="https://github.com/injekt/slop/wiki/Commands">Commands</a></li>
</ul>


<h2>Woah woah, why you hating on OptionParser?</h2>

<p>I'm not, honestly! I love OptionParser. I really do, it's a fantastic library.
So why did I build Slop? Well, I find myself using OptionParser to simply
gather a bunch of key/value options, usually you would do something like this:</p>

<pre class="code"><span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>optparse</span><span class='tstring_end'>'</span></span>

<span class='id things'>things</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

<span class='id opt'>opt</span> <span class='op'>=</span> <span class='const'>OptionParser</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id opt'>opt</span><span class='op'>|</span>
  <span class='id opt'>opt</span><span class='period'>.</span><span class='id on'>on</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-n</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--name NAME</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your name</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id name'>name</span><span class='op'>|</span>
    <span class='id things'>things</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id name'>name</span>
  <span class='kw'>end</span>

  <span class='id opt'>opt</span><span class='period'>.</span><span class='id on'>on</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-a</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--age AGE</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your age</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id age'>age</span><span class='op'>|</span>
    <span class='id things'>things</span><span class='lbracket'>[</span><span class='symbol'>:age</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id age'>age</span><span class='period'>.</span><span class='id to_i'>to_i</span>
  <span class='kw'>end</span>

  <span class='comment'># you get the point
</span><span class='kw'>end</span>

<span class='id opt'>opt</span><span class='period'>.</span><span class='id parse'>parse</span>
<span class='id things'>things</span> <span class='comment'>#=&gt; { :name =&gt; 'lee', :age =&gt; 105 }
</span></pre>

<p>Which is all great and stuff, but it can lead to some repetition. The same
thing in Slop:</p>

<pre class="code"><span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>slop</span><span class='tstring_end'>'</span></span>

<span class='id opts'>opts</span> <span class='op'>=</span> <span class='const'>Slop</span><span class='period'>.</span><span class='id parse'>parse</span> <span class='kw'>do</span>
  <span class='id on'>on</span> <span class='symbol'>:n</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>true</span>
  <span class='id on'>on</span> <span class='symbol'>:a</span><span class='comma'>,</span> <span class='symbol'>:age</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your age</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:as</span> <span class='op'>=&gt;</span> <span class='symbol'>:int</span>
<span class='kw'>end</span>

<span class='id opts'>opts</span><span class='period'>.</span><span class='id to_hash'>to_hash</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span> <span class='comment'>#=&gt; { :name =&gt; 'lee', :age =&gt; 105 }
</span></pre>
</div></div>
    
    <div id="footer">
  Generated on Sat Jun 11 09:11:12 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.1 (ruby-1.9.2).
</div>

  </body>
</html>